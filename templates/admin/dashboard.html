{% extends "base.html" %} {% block title %}Tableau de Bord Admin - Flask Task
Manager{% endblock %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Tableau de Bord Administrateur</h1>
  <a href="{{ url_for('create_task') }}" class="btn btn-primary">
    <i class="fas fa-plus"></i> Nouvelle Tâche
  </a>
</div>

<div class="row">
  <div class="col-md-3 mb-4">
    <div class="card bg-primary text-white">
      <div class="card-body text-center">
        <h5 class="card-title">Utilisateurs</h5>
        <p class="card-text display-6">{{ users_count }}</p>
      </div>
    </div>
  </div>
  <div class="col-md-3 mb-4">
    <div class="card bg-success text-white">
      <div class="card-body text-center">
        <h5 class="card-title">Tâches Total</h5>
        <p class="card-text display-6">{{ tasks_count }}</p>
      </div>
    </div>
  </div>
  <div class="col-md-3 mb-4">
    <div class="card bg-warning text-dark">
      <div class="card-body text-center">
        <h5 class="card-title">Tâches En Cours</h5>
        <p class="card-text display-6">{{ pending_tasks_count }}</p>
      </div>
    </div>
  </div>
  <div class="col-md-3 mb-4">
    <div class="card bg-info text-white">
      <div class="card-body text-center">
        <h5 class="card-title">Tâches Complétées</h5>
        <p class="card-text display-6">{{ completed_tasks_count }}</p>
      </div>
    </div>
  </div>
</div>

<div class="card shadow">
  <div class="card-header bg-dark text-white">
    <h5 class="mb-0">Gestion des Utilisateurs</h5>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom d'utilisateur</th>
            <th>Email</th>
            <th>Rôle</th>
            <th>Date d'inscription</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>
              {% if user.is_admin %}
              <span class="badge bg-danger">Admin</span>
              {% else %}
              <span class="badge bg-secondary">Utilisateur</span>
              {% endif %}
            </td>
            <td>{{ user.created_at.strftime('%d/%m/%Y') }}</td>
            <td>
              <a
                href="{{ url_for('view_user', user_id=user.id) }}"
                class="btn btn-sm btn-info"
              >
                <i class="fas fa-eye"></i>
              </a>
              {% if not user.is_admin %}
              <a href="#" class="btn btn-sm btn-warning">
                <i class="fas fa-edit"></i>
              </a>
              <a href="#" class="btn btn-sm btn-danger">
                <i class="fas fa-trash"></i>
              </a>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
